<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Single Image Preview Generator with Play Button</title>
  <style>
    body {
      background: #121212;
      color: #eee;
      font-family: Arial, sans-serif;
      padding: 20px;
      max-width: 600px;
      margin: auto;
      text-align: center;
    }
    input[type=text] {
      width: 100%;
      padding: 12px;
      font-size: 16px;
      border-radius: 8px;
      border: none;
      box-sizing: border-box;
      margin-bottom: 10px;
    }
    button {
      background: #ff3399;
      color: white;
      border: none;
      padding: 12px 25px;
      font-size: 16px;
      border-radius: 8px;
      cursor: pointer;
      margin-bottom: 20px;
      width: 100%;
    }
    canvas {
      max-width: 100%;
      border: 1px solid #444;
      border-radius: 8px;
      margin-bottom: 15px;
    }
    .html-snippet {
      background: #111;
      padding: 10px;
      border-radius: 6px;
      font-family: monospace;
      white-space: pre-wrap;
      word-break: break-word;
      user-select: all;
    }
  </style>
</head>
<body>

<h2>Generate Preview for One Image</h2>

<input type="text" id="imageUrl" placeholder="Paste image URL here" />
<input type="text" id="redirectUrl" placeholder="Redirect URL (e.g. https://t.me/Xibabes)" value="https://t.me/Xibabes" />

<button id="generateBtn">Generate Preview</button>

<canvas id="canvas" style="display:none;"></canvas>

<div id="result"></div>

<script>
  const generateBtn = document.getElementById('generateBtn');
  const canvas = document.getElementById('canvas');
  const ctx = canvas.getContext('2d');
  const resultDiv = document.getElementById('result');

  function addPlayButtonToImage(img) {
    canvas.width = img.width;
    canvas.height = img.height;

    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.drawImage(img, 0, 0);

    const size = Math.min(img.width, img.height) / 4;
    const centerX = img.width / 2;
    const centerY = img.height / 2;

    // Draw semi-transparent circle
    ctx.beginPath();
    ctx.arc(centerX, centerY, size / 1.5, 0, 2 * Math.PI);
    ctx.fillStyle = "rgba(0,0,0,0.5)";
    ctx.fill();

    // Draw white play triangle
    ctx.beginPath();
    ctx.moveTo(centerX - size / 3, centerY - size / 2.5);
    ctx.lineTo(centerX - size / 3, centerY + size / 2.5);
    ctx.lineTo(centerX + size / 2, centerY);
    ctx.closePath();
    ctx.fillStyle = "white";
    ctx.fill();
  }

  generateBtn.addEventListener('click', () => {
    const imageUrl = document.getElementById('imageUrl').value.trim();
    const redirectUrl = document.getElementById('redirectUrl').value.trim() || "https://t.me/Xibabes";

    if (!imageUrl) {
      alert("Please enter an image URL");
      return;
    }

    const img = new Image();
    img.crossOrigin = "anonymous"; // try CORS, but may fail if server disallows
    img.onload = () => {
      addPlayButtonToImage(img);
      canvas.style.display = "block";

      const dataURL = canvas.toDataURL("image/jpeg", 0.95);

      const previewPageName = "preview.html"; // single page name
      const pageUrl = `https://yourdomain.com/${previewPageName}`; // CHANGE this to your actual domain + path

      const htmlSnippet = `<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Preview</title>
<meta property="og:type" content="website" />
<meta property="og:url" content="${pageUrl}" />
<meta property="og:title" content="Exclusive Invite ðŸ’‹" />
<meta property="og:description" content="Join the private circle now. 18+ only." />
<meta property="og:image" content="${dataURL}" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body>
<h2>Redirecting...</h2>
<script>
  setTimeout(() => {
    window.location.href = "${redirectUrl}";
  }, 2000);
</script>
</body>
</html>`;

      resultDiv.innerHTML = `
        <h3>Preview Image:</h3>
        <img src="${dataURL}" alt="Preview with Play Button" style="max-width:100%;border-radius:10px;box-shadow:0 0 15px #ff3399;" />
        <h3>Generated HTML Preview Page:</h3>
        <pre class="html-snippet" contenteditable spellcheck="false">${htmlSnippet}</pre>
      `;
    };

    img.onerror = () => {
      alert("Failed to load image. Try a CORS-enabled image URL.");
    };

    img.src = imageUrl;
  });
</script>

</body>
</html>
