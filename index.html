<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Auto Preview Generator with Play Button</title>
<style>
  body {
    background: #121212;
    color: #eee;
    font-family: Arial, sans-serif;
    padding: 20px;
    max-width: 900px;
    margin: auto;
  }
  h1 {
    text-align: center;
    margin-bottom: 10px;
  }
  textarea, input[type=text] {
    width: 100%;
    padding: 12px;
    margin: 10px 0;
    font-size: 16px;
    border-radius: 8px;
    border: none;
    box-sizing: border-box;
  }
  button {
    background: #ff3399;
    color: white;
    border: none;
    padding: 12px 25px;
    font-size: 16px;
    border-radius: 8px;
    cursor: pointer;
    margin: 10px 0 25px 0;
    display: block;
    width: 100%;
  }
  button:disabled {
    background: #555;
    cursor: not-allowed;
  }
  .preview-item {
    background: #222;
    margin-bottom: 25px;
    padding: 15px;
    border-radius: 10px;
  }
  canvas {
    max-width: 100%;
    border: 1px solid #444;
    border-radius: 8px;
  }
  .image-preview {
    margin-top: 10px;
  }
  .html-snippet {
    background: #111;
    padding: 10px;
    border-radius: 6px;
    margin-top: 10px;
    font-family: monospace;
    white-space: pre-wrap;
    word-break: break-word;
    user-select: all;
  }
  label {
    display: block;
    margin: 15px 0 5px 0;
  }
</style>
</head>
<body>

<h1>Auto Preview Generator with Play Button</h1>

<label for="imageUrls">Paste image URLs (one per line):</label>
<textarea id="imageUrls" rows="8" placeholder="https://example.com/image1.jpg&#10;https://example.com/image2.jpg"></textarea>

<label for="redirectUrl">Redirect URL (where user goes on preview click):</label>
<input type="text" id="redirectUrl" placeholder="https://t.me/Xibabes" value="https://t.me/Xibabes" />

<button id="startBtn">Generate Previews</button>

<div id="results"></div>

<script>
  const startBtn = document.getElementById("startBtn");
  const results = document.getElementById("results");

  function addPlayButtonToImage(img, canvas) {
    const ctx = canvas.getContext("2d");
    canvas.width = img.width;
    canvas.height = img.height;

    ctx.drawImage(img, 0, 0);

    // Draw semi-transparent circle
    const size = Math.min(img.width, img.height) / 4;
    const centerX = img.width / 2;
    const centerY = img.height / 2;

    ctx.beginPath();
    ctx.arc(centerX, centerY, size / 1.5, 0, 2 * Math.PI);
    ctx.fillStyle = "rgba(0,0,0,0.5)";
    ctx.fill();

    // Draw white triangle (play button)
    ctx.beginPath();
    ctx.moveTo(centerX - size / 3, centerY - size / 2.5);
    ctx.lineTo(centerX - size / 3, centerY + size / 2.5);
    ctx.lineTo(centerX + size / 2, centerY);
    ctx.closePath();
    ctx.fillStyle = "white";
    ctx.fill();
  }

  async function generatePreview(index, url, redirectUrl) {
    return new Promise((resolve) => {
      const img = new Image();
      img.crossOrigin = "anonymous";
      img.src = url;

      img.onload = () => {
        const canvas = document.createElement("canvas");
        addPlayButtonToImage(img, canvas);

        // Convert to dataURL
        const dataURL = canvas.toDataURL("image/jpeg", 0.95);

        // Generate a fake filename & preview page name
        const previewPageName = `preview-${index + 1}.html`;
        const pageUrl = `https://yourdomain.com/${previewPageName}`; // <- CHANGE to your domain

        // Generate HTML snippet with OG tags and redirect
        const htmlSnippet = `<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Preview ${index + 1}</title>
<meta property="og:type" content="website" />
<meta property="og:url" content="${pageUrl}" />
<meta property="og:title" content="Exclusive Invite üíã" />
<meta property="og:description" content="Join the private circle now. 18+ only." />
<meta property="og:image" content="${dataURL}" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body>
<h2>Redirecting...</h2>
<script>
  setTimeout(() => {
    window.location.href = "${redirectUrl}";
  }, 2000);
</script>
</body>
</html>`;

        resolve({ index, dataURL, htmlSnippet, previewPageName });
      };

      img.onerror = () => {
        resolve({ index, error: true, url });
      };
    });
  }

  startBtn.addEventListener("click", async () => {
    startBtn.disabled = true;
    results.innerHTML = "<p>Generating previews, please wait...</p>";

    const urlsRaw = document.getElementById("imageUrls").value.trim();
    const redirectUrl = document.getElementById("redirectUrl").value.trim() || "https://t.me/Xibabes";

    if (!urlsRaw) {
      alert("Please paste some image URLs!");
      startBtn.disabled = false;
      return;
    }

    const urls = urlsRaw.split(/\r?\n/);
    results.innerHTML = "";

    for (let i = 0; i < urls.length; i++) {
      const url = urls[i].trim();
      if (!url) continue;

      const result = await generatePreview(i, url, redirectUrl);

      const container = document.createElement("div");
      container.classList.add("preview-item");

      if (result.error) {
        container.innerHTML = `<strong>‚ö†Ô∏è Failed to load:</strong> <br>${result.url}`;
      } else {
        container.innerHTML = `
          <strong>Preview #${result.index + 1}</strong>
          <canvas width="300"></canvas>
          <div class="html-snippet" contenteditable="true" spellcheck="false"></div>
        `;

        const canvas = container.querySelector("canvas");
        const ctx = canvas.getContext("2d");

        const previewImg = new Image();
        previewImg.onload = () => {
          canvas.width = previewImg.width > 300 ? 300 : previewImg.width;
          canvas.height = previewImg.height * (canvas.width / previewImg.width);
          ctx.drawImage(previewImg, 0, 0, canvas.width, canvas.height);
        };
        previewImg.src = result.dataURL;

        container.querySelector(".html-snippet").textContent = result.htmlSnippet;
      }

      results.appendChild(container);
    }

    startBtn.disabled = false;
  });
</script>

</body>
    </html>
